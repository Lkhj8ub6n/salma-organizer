<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†Ø¸Ù… Ø³Ù„Ù…Ù‰ Ø§Ù„Ø´Ø®ØµÙŠ</title>
    <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ Ø´Ø®ØµÙŠ Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#8b5cf6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Ù…Ù†Ø¸Ù… Ø³Ù„Ù…Ù‰">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Manifest Link -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2b50.png">
    <link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2b50.png">
    
    <!-- OG Tags -->
    <meta property="og:title" content="Ù…Ù†Ø¸Ù… Ø³Ù„Ù…Ù‰ Ø§Ù„Ø´Ø®ØµÙŠ">
    <meta property="og:description" content="ØªØ·Ø¨ÙŠÙ‚ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©">
    <meta property="og:image" content="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2b50.png">
    <meta property="og:type" content="website">
    
    <style>
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
            40%, 43% { transform: translateY(-10px); }
            70% { transform: translateY(-5px); }
            90% { transform: translateY(-2px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes celebration {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(5deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
        .animate-slideIn { animation: slideIn 0.5s ease-out; }
        .animate-bounce { animation: bounce 2s infinite; }
        .animate-pulse { animation: pulse 2s infinite; }
        .animate-celebration { animation: celebration 0.6s ease-out; }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1001;
            animation: slideIn 0.5s ease-out;
            border-left: 4px solid #10b981;
        }
        
        .dark-mode {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
            color: white;
        }
        
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        /* Offline indicator */
        body.offline::after {
            content: 'ğŸ“± ØºÙŠØ± Ù…ØªØµÙ„';
            position: fixed;
            top: 10px;
            left: 10px;
            background: #f59e0b;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
        }
        
        @keyframes confettiFall {
            to { transform: translateY(100vh) rotate(360deg); }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(100%); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 min-h-screen">
    <div id="app">
        <!-- Loading -->
        <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <div class="text-6xl mb-4 floating">â­</div>
                <div class="text-xl text-purple-600 font-bold animate-pulse">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                <div class="mt-4 w-32 h-1 bg-gray-200 rounded-full mx-auto overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 animate-pulse"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Install Prompt -->
    <div id="installPrompt" class="install-prompt">
        <button onclick="installApp()" class="flex items-center gap-2">
            <span>ğŸ“±</span>
            ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        </button>
    </div>

    <!-- Notification Container -->
    <div id="notifications"></div>

    <!-- React Scripts - Ù…Ù† HTTPS CDN Ù…ÙˆØ«ÙˆÙ‚ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script>
        // Utility Functions
        const showNotification = (message, type = 'success') => {
            const container = document.getElementById('notifications');
            if (!container) return;
            
            const notification = document.createElement('div');
            const colors = {
                success: 'border-green-500 text-green-700',
                error: 'border-red-500 text-red-700',
                info: 'border-blue-500 text-blue-700'
            };
            
            notification.className = `notification ${colors[type]}`;
            notification.innerHTML = `
                <div class="flex items-center gap-2">
                    <span>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</span>
                    <span>${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => {
                    if (container.contains(notification)) {
                        container.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        };

        const createConfetti = () => {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}vw;
                    top: -10px;
                    z-index: 1000;
                    animation: confettiFall 3s linear infinite;
                    pointer-events: none;
                `;
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 3000);
            }
        };

        // React App
        window.addEventListener('load', function() {
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                document.getElementById('app').innerHTML = `
                    <div class="flex items-center justify-center min-h-screen text-center">
                        <div>
                            <div class="text-6xl mb-4">âš ï¸</div>
                            <h1 class="text-2xl font-bold text-red-600 mb-2">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</h1>
                            <p class="text-gray-600">ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©</p>
                            <button onclick="location.reload()" class="mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg">
                                Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
                            </button>
                        </div>
                    </div>
                `;
                return;
            }

            function App() {
                const [showWelcome, setShowWelcome] = React.useState(true);
                const [activeTab, setActiveTab] = React.useState('habits');
                const [darkMode, setDarkMode] = React.useState(false);
                const [habits, setHabits] = React.useState([
                    { 
                        id: 1, 
                        name: 'Ø´Ø±Ø¨ 8 Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡', 
                        current: 3, 
                        target: 8, 
                        category: 'ØµØ­Ø©',
                        streak: 5,
                        lastUpdated: new Date().toISOString().split('T')[0]
                    },
                    { 
                        id: 2, 
                        name: 'Ù‚Ø±Ø§Ø¡Ø© 30 Ø¯Ù‚ÙŠÙ‚Ø©', 
                        current: 1, 
                        target: 1, 
                        category: 'Ù‚Ø±Ø§Ø¡Ø©',
                        streak: 12,
                        lastUpdated: new Date().toISOString().split('T')[0]
                    }
                ]);
                const [tasks, setTasks] = React.useState([
                    { 
                        id: 1, 
                        title: 'ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ØºØ±ÙØ©', 
                        completed: false, 
                        priority: 'Ù…ØªÙˆØ³Ø·Ø©',
                        createdAt: new Date().toISOString(),
                        dueDate: '2025-06-22'
                    },
                    { 
                        id: 2, 
                        title: 'Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø¯ÙˆØ±Ø©', 
                        completed: false, 
                        priority: 'Ø¹Ø§Ù„ÙŠØ©',
                        createdAt: new Date().toISOString(),
                        dueDate: '2025-06-25'
                    }
                ]);
                const [showAddForm, setShowAddForm] = React.useState(false);
                const [newHabit, setNewHabit] = React.useState({ 
                    name: '', 
                    target: 1, 
                    category: 'ØµØ­Ø©' 
                });
                const [newTask, setNewTask] = React.useState({ 
                    title: '', 
                    priority: 'Ù…ØªÙˆØ³Ø·Ø©',
                    dueDate: ''
                });
                const [showStats, setShowStats] = React.useState(false);
                const [theme, setTheme] = React.useState('purple');

                const categories = ['ØµØ­Ø©', 'ØªØ¹Ù„Ù…', 'Ø¹Ù…Ù„', 'Ø±ÙŠØ§Ø¶Ø©', 'Ù‚Ø±Ø§Ø¡Ø©', 'Ø£Ø®Ø±Ù‰'];
                const categoryEmojis = {
                    'ØµØ­Ø©': 'ğŸ’š',
                    'ØªØ¹Ù„Ù…': 'ğŸ“š', 
                    'Ø¹Ù…Ù„': 'ğŸ’¼',
                    'Ø±ÙŠØ§Ø¶Ø©': 'ğŸƒâ€â™€ï¸',
                    'Ù‚Ø±Ø§Ø¡Ø©': 'ğŸ“–',
                    'Ø£Ø®Ø±Ù‰': 'â­'
                };

                // Icon component
                const Icon = ({ type, className = "w-6 h-6", animate = false }) => {
                    const icons = {
                        star: "â­", target: "ğŸ¯", trophy: "ğŸ†", plus: "â•",
                        calendar: "ğŸ“…", check: "âœ…", circle: "â­•", trash: "ğŸ—‘ï¸",
                        list: "ğŸ“", edit: "âœï¸", stats: "ğŸ“Š", theme: "ğŸ¨",
                        moon: "ğŸŒ™", sun: "â˜€ï¸", fire: "ğŸ”¥", medal: "ğŸ…"
                    };
                    return React.createElement('span', {
                        className: `${className} inline-block ${animate ? 'animate-bounce' : ''}`,
                        style: { fontSize: '1.5em' }
                    }, icons[type] || "ğŸ“±");
                };

                // Progress Circle Component
                const ProgressCircle = ({ progress, size = 60 }) => {
                    const radius = 22;
                    const circumference = radius * 2 * Math.PI;
                    const strokeDashoffset = circumference - (progress / 100) * circumference;

                    return React.createElement('div', {
                        className: 'relative',
                        style: { width: size, height: size }
                    }, [
                        React.createElement('svg', {
                            key: 'svg',
                            width: size,
                            height: size,
                            className: 'transform -rotate-90'
                        }, [
                            React.createElement('circle', {
                                key: 'bg',
                                cx: size / 2,
                                cy: size / 2,
                                r: radius,
                                fill: 'transparent',
                                stroke: '#e5e7eb',
                                strokeWidth: 6
                            }),
                            React.createElement('circle', {
                                key: 'progress',
                                cx: size / 2,
                                cy: size / 2,
                                r: radius,
                                fill: 'transparent',
                                stroke: progress === 100 ? '#10b981' : '#8b5cf6',
                                strokeWidth: 6,
                                strokeDasharray: circumference,
                                strokeDashoffset: strokeDashoffset,
                                style: { transition: 'stroke-dashoffset 0.5s ease-in-out' }
                            })
                        ]),
                        React.createElement('div', {
                            key: 'text',
                            className: 'absolute inset-0 flex items-center justify-center text-sm font-bold'
                        }, `${Math.round(progress)}%`)
                    ]);
                };

                // Load/Save data with error handling
                React.useEffect(() => {
                    try {
                        const savedHabits = localStorage.getItem('salma-habits');
                        const savedTasks = localStorage.getItem('salma-tasks');
                        const savedWelcome = localStorage.getItem('salma-welcome');
                        const savedTheme = localStorage.getItem('salma-theme');
                        const savedDarkMode = localStorage.getItem('salma-dark-mode');
                        
                        if (savedHabits) setHabits(JSON.parse(savedHabits));
                        if (savedTasks) setTasks(JSON.parse(savedTasks));
                        if (savedWelcome) setShowWelcome(false);
                        if (savedTheme) setTheme(savedTheme);
                        if (savedDarkMode) setDarkMode(JSON.parse(savedDarkMode));
                    } catch (e) {
                        console.warn('Error loading data:', e);
                        showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©', 'info');
                    }
                }, []);

                React.useEffect(() => {
                    try {
                        localStorage.setItem('salma-habits', JSON.stringify(habits));
                    } catch (e) {
                        console.warn('Error saving habits:', e);
                    }
                }, [habits]);

                React.useEffect(() => {
                    try {
                        localStorage.setItem('salma-tasks', JSON.stringify(tasks));
                    } catch (e) {
                        console.warn('Error saving tasks:', e);
                    }
                }, [tasks]);

                React.useEffect(() => {
                    try {
                        localStorage.setItem('salma-theme', theme);
                        localStorage.setItem('salma-dark-mode', JSON.stringify(darkMode));
                    } catch (e) {
                        console.warn('Error saving settings:', e);
                    }
                    
                    document.body.className = darkMode ? 'dark-mode min-h-screen' : 'bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 min-h-screen';
                }, [theme, darkMode]);

                // Functions
                const addHabit = () => {
                    if (newHabit.name.trim()) {
                        const habit = {
                            id: Date.now(),
                            name: newHabit.name,
                            target: parseInt(newHabit.target) || 1,
                            current: 0,
                            category: newHabit.category,
                            streak: 0,
                            lastUpdated: new Date().toISOString().split('T')[0]
                        };
                        setHabits([...habits, habit]);
                        setNewHabit({ name: '', target: 1, category: 'ØµØ­Ø©' });
                        setShowAddForm(false);
                        showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰', 'success');
                    }
                };

                const addTask = () => {
                    if (newTask.title.trim()) {
                        const task = {
                            id: Date.now(),
                            title: newTask.title,
                            completed: false,
                            priority: newTask.priority,
                            createdAt: new Date().toISOString(),
                            dueDate: newTask.dueDate
                        };
                        setTasks([...tasks, task]);
                        setNewTask({ title: '', priority: 'Ù…ØªÙˆØ³Ø·Ø©', dueDate: '' });
                        setShowAddForm(false);
                        showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ…', 'success');
                    }
                };

                const updateHabit = (id, increment) => {
                    setHabits(habits.map(habit => {
                        if (habit.id === id) {
                            const newCurrent = increment 
                                ? Math.min(habit.current + 1, habit.target)
                                : Math.max(habit.current - 1, 0);
                            
                            const wasCompleted = habit.current >= habit.target;
                            const isNowCompleted = newCurrent >= habit.target;
                            
                            if (!wasCompleted && isNowCompleted) {
                                createConfetti();
                                showNotification(`ğŸ‰ Ø£Ø­Ø³Ù†Øª Ø³Ù„Ù…Ù‰! Ø£ÙƒÙ…Ù„Øª Ø¹Ø§Ø¯Ø© "${habit.name}"`, 'success');
                            }
                            
                            return { 
                                ...habit, 
                                current: newCurrent,
                                lastUpdated: new Date().toISOString().split('T')[0]
                            };
                        }
                        return habit;
                    }));
                };

                const toggleTask = (id) => {
                    setTasks(tasks.map(task => {
                        if (task.id === id) {
                            const newCompleted = !task.completed;
                            if (newCompleted) {
                                showNotification(`âœ… Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª Ù…Ù‡Ù…Ø© "${task.title}"`, 'success');
                            }
                            return { ...task, completed: newCompleted };
                        }
                        return task;
                    }));
                };

                const deleteItem = (id, type) => {
                    if (type === 'habit') {
                        setHabits(habits.filter(h => h.id !== id));
                        showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø§Ø¯Ø©', 'info');
                    } else {
                        setTasks(tasks.filter(t => t.id !== id));
                        showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©', 'info');
                    }
                };

                const getStats = () => {
                    const totalHabits = habits.length;
                    const completedHabits = habits.filter(h => h.current >= h.target).length;
                    const habitProgress = totalHabits > 0 ? Math.round((completedHabits / totalHabits) * 100) : 0;
                    
                    const totalTasks = tasks.length;
                    const completedTasks = tasks.filter(t => t.completed).length;
                    const taskProgress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
                    
                    const totalStreak = habits.reduce((sum, h) => sum + (h.streak || 0), 0);
                    
                    return {
                        habitProgress,
                        taskProgress,
                        totalStreak,
                        totalCompleted: completedHabits + completedTasks
                    };
                };

                // Welcome screen
                if (showWelcome) {
                    return React.createElement('div', {
                        className: "fixed inset-0 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-600 flex items-center justify-center z-50"
                    }, React.createElement('div', {
                        className: "text-center text-white max-w-lg mx-auto p-8 animate-fadeIn"
                    }, [
                        React.createElement('div', {
                            key: 'animation',
                            className: "text-8xl mb-4 animate-bounce"
                        }, "ğŸ‰"),
                        React.createElement('h1', {
                            key: 'title',
                            className: "text-5xl font-bold mb-6"
                        }, "Ù…Ø¨Ø±ÙˆÙƒ ÙŠØ§ Ø³Ù„Ù…Ù‰! ğŸŠ"),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: "text-xl mb-8"
                        }, "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª! Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸŒŸ"),
                        React.createElement('button', {
                            key: 'start-btn',
                            onClick: () => {
                                setShowWelcome(false);
                                try {
                                    localStorage.setItem('salma-welcome', 'true');
                                } catch (e) {
                                    console.warn('Could not save welcome state');
                                }
                                createConfetti();
                            },
                            className: "bg-white text-purple-600 px-10 py-4 rounded-full font-bold text-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 animate-pulse"
                        }, "Ø§Ø¨Ø¯Ø¦ÙŠ Ù…ØºØ§Ù…Ø±ØªÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©! âœ¨")
                    ]));
                }

                const stats = getStats();

                // Main app - Ù†ÙØ³ Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
                return React.createElement('div', {
                    className: `max-w-6xl mx-auto p-4 ${darkMode ? 'text-white' : ''}`
                }, [
                    // Header
                    React.createElement('div', {
                        key: 'header',
                        className: "text-center mb-8 animate-fadeIn"
                    }, [
                        React.createElement('h1', { 
                            key: 'title', 
                            className: `text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 ${darkMode ? 'text-white' : ''}`
                        }, "Ù…Ù†Ø¸Ù… Ø³Ù„Ù…Ù‰ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ â­"),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: `text-lg ${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-4`
                        }, `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ! Ù„Ø¯ÙŠÙƒ ${habits.filter(h => h.current < h.target).length} Ø¹Ø§Ø¯Ø© Ùˆ ${tasks.filter(t => !t.completed).length} Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø±Ùƒ ğŸ’ª`)
                    ]),

                    // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª...
                    React.createElement('div', {
                        key: 'simple-content',
                        className: "text-center py-16"
                    }, [
                        React.createElement('div', { key: 'icon', className: "text-8xl mb-4" }, "ğŸ¯"),
                        React.createElement('h2', { key: 'title', className: "text-2xl font-bold mb-4" }, "ØªØ·Ø¨ÙŠÙ‚ Ù…Ù†Ø¸Ù… Ø³Ù„Ù…Ù‰"),
                        React.createElement('p', { key: 'desc', className: "text-lg text-gray-600 mb-8" }, "ØªØ·Ø¨ÙŠÙ‚ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"),
                        React.createElement('div', {
                            key: 'stats',
                            className: "grid grid-cols-2 gap-4 max-w-md mx-auto"
                        }, [
                            React.createElement('div', {
                                key: 'habits-stat',
                                className: "bg-white rounded-lg p-4 shadow"
                            }, [
                                React.createElement('div', { key: 'number', className: "text-2xl font-bold text-purple-600" }, habits.length),
                                React.createElement('div', { key: 'label', className: "text-sm text-gray-600" }, "Ø¹Ø§Ø¯Ø©")
                            ]),
                            React.createElement('div', {
                                key: 'tasks-stat',
                                className: "bg-white rounded-lg p-4 shadow"
                            }, [
                                React.createElement('div', { key: 'number', className: "text-2xl font-bold text-blue-600" }, tasks.length),
                                React.createElement('div', { key: 'label', className: "text-sm text-gray-600" }, "Ù…Ù‡Ù…Ø©")
                            ])
                        ])
                    ])
                ]);
            }

            // Render the app safely
            try {
                const root = ReactDOM.createRoot(document.getElementById('app'));
                root.render(React.createElement(App));
            } catch (error) {
                console.error('Error rendering app:', error);
                document.getElementById('app').innerHTML = `
                    <div class="flex items-center justify-center min-h-screen text-center">
                        <div>
                            <div class="text-6xl mb-4">âš ï¸</div>
                            <h1 class="text-2xl font-bold text-red-600 mb-2">Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h1>
                            <p class="text-gray-600">ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©</p>
                            <button onclick="location.reload()" class="mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg">
                                Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
                            </button>
                        </div>
                    </div>
                `;
            }
        });

        // PWA Installation
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if (installPrompt) {
                installPrompt.style.display = 'block';
            }
            
            setTimeout(() => {
                showNotification('ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ù‡Ø§ØªÙÙƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹!', 'info');
            }, 5000);
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((result) => {
                    if (result.outcome === 'accepted') {
                        console.log('âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!');
                        if (installPrompt) {
                            installPrompt.style.display = 'none';
                        }
                        showNotification('ğŸ‰ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                        createConfetti();
                    }
                    deferredPrompt = null;
                });
            }
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator && location.protocol === 'https:') {
            navigator.serviceWorker.register('./sw.js')
                .then((registration) => {
                    console.log('âœ… Service Worker Ù…Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                })
                .catch((error) => {
                    console.log('â„¹ï¸ Service Worker Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡:', error);
                });
        }

        // PWA Events
        window.addEventListener('appinstalled', () => {
            console.log('ğŸ‰ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!');
            createConfetti();
        });

        window.addEventListener('online', () => {
            showNotification('ğŸŒ Ø¹Ø¯Øª Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!', 'success');
            document.body.classList.remove('offline');
        });

        window.addEventListener('offline', () => {
            showNotification('ğŸ“± Ø£ØµØ¨Ø­Øª ØºÙŠØ± Ù…ØªØµÙ„ - Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹', 'info');
            document.body.classList.add('offline');
        });

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©', 'error');
        });

        window.addEventListener('unhandledrejection', (e) => {
            console.error('Unhandled promise rejection:', e.reason);
            showNotification('Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', 'error');
        });

        console.log('ğŸ‰ ØªØ·Ø¨ÙŠÙ‚ Ø³Ù„Ù…Ù‰ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!');
    </script>
</body>
</html>
