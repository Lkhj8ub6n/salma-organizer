<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÖŸÜÿ∏ŸÖ ÿ≥ŸÑŸÖŸâ ÿßŸÑÿ¥ÿÆÿµŸä</title>
    <meta name="description" content="ÿ™ÿ∑ÿ®ŸäŸÇ ÿ¥ÿÆÿµŸä ŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑÿπÿßÿØÿßÿ™ ŸàÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑŸäŸàŸÖŸäÿ©">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#8b5cf6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ŸÖŸÜÿ∏ŸÖ ÿ≥ŸÑŸÖŸâ">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Manifest Link -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E‚≠ê%3C/text%3E%3C/svg%3E">
    
    <style>
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
            40%, 43% { transform: translateY(-10px); }
            70% { transform: translateY(-5px); }
            90% { transform: translateY(-2px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes celebration {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(5deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
        .animate-slideIn { animation: slideIn 0.5s ease-out; }
        .animate-bounce { animation: bounce 2s infinite; }
        .animate-pulse { animation: pulse 2s infinite; }
        .animate-celebration { animation: celebration 0.6s ease-out; }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1001;
            animation: slideIn 0.5s ease-out;
            border-left: 4px solid #10b981;
        }
        
        .dark-mode {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
            color: white;
        }
        
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        /* Offline indicator */
        body.offline::after {
            content: 'üì± ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ';
            position: fixed;
            top: 10px;
            left: 10px;
            background: #f59e0b;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 min-h-screen">
    <div id="app">
        <!-- Loading -->
        <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <div class="text-6xl mb-4 floating">‚≠ê</div>
                <div class="text-xl text-purple-600 font-bold animate-pulse">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>
                <div class="mt-4 w-32 h-1 bg-gray-200 rounded-full mx-auto overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 animate-pulse"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Install Prompt -->
    <div id="installPrompt" class="install-prompt">
        <button onclick="installApp()" class="flex items-center gap-2">
            <span>üì±</span>
            ÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        </button>
    </div>

    <!-- Notification Container -->
    <div id="notifications"></div>

    <!-- React Scripts -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script>
        // Utility Functions
        const showNotification = (message, type = 'success') => {
            const container = document.getElementById('notifications');
            const notification = document.createElement('div');
            const colors = {
                success: 'border-green-500 text-green-700',
                error: 'border-red-500 text-red-700',
                info: 'border-blue-500 text-blue-700'
            };
            
            notification.className = `notification ${colors[type]}`;
            notification.innerHTML = `
                <div class="flex items-center gap-2">
                    <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                    <span>${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => container.removeChild(notification), 500);
            }, 3000);
        };

        const createConfetti = () => {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}vw;
                    top: -10px;
                    z-index: 1000;
                    animation: confettiFall 3s linear infinite;
                `;
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 3000);
            }
        };

        // Add confetti animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                to { transform: translateY(100vh) rotate(360deg); }
            }
            @keyframes fadeOut {
                to { opacity: 0; transform: translateX(100%); }
            }
        `;
        document.head.appendChild(style);

        // React App - ŸÜŸÅÿ≥ ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿπ ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿ®ÿ≥Ÿäÿ∑ÿ©
        window.addEventListener('load', function() {
            function App() {
                const [showWelcome, setShowWelcome] = React.useState(true);
                const [activeTab, setActiveTab] = React.useState('habits');
                const [darkMode, setDarkMode] = React.useState(false);
                const [habits, setHabits] = React.useState([
                    { 
                        id: 1, 
                        name: 'ÿ¥ÿ±ÿ® 8 ÿ£ŸÉŸàÿßÿ® ŸÖÿßÿ°', 
                        current: 3, 
                        target: 8, 
                        category: 'ÿµÿ≠ÿ©',
                        streak: 5,
                        lastUpdated: new Date().toISOString().split('T')[0]
                    },
                    { 
                        id: 2, 
                        name: 'ŸÇÿ±ÿßÿ°ÿ© 30 ÿØŸÇŸäŸÇÿ©', 
                        current: 1, 
                        target: 1, 
                        category: 'ŸÇÿ±ÿßÿ°ÿ©',
                        streak: 12,
                        lastUpdated: new Date().toISOString().split('T')[0]
                    }
                ]);
                const [tasks, setTasks] = React.useState([
                    { 
                        id: 1, 
                        title: 'ÿ™ŸÜÿ∏ŸäŸÖ ÿßŸÑÿ∫ÿ±ŸÅÿ©', 
                        completed: false, 
                        priority: 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©',
                        createdAt: new Date().toISOString(),
                        dueDate: '2025-06-22'
                    },
                    { 
                        id: 2, 
                        title: 'ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ÿØŸàÿ±ÿ©', 
                        completed: false, 
                        priority: 'ÿπÿßŸÑŸäÿ©',
                        createdAt: new Date().toISOString(),
                        dueDate: '2025-06-25'
                    }
                ]);
                const [showAddForm, setShowAddForm] = React.useState(false);
                const [newHabit, setNewHabit] = React.useState({ 
                    name: '', 
                    target: 1, 
                    category: 'ÿµÿ≠ÿ©' 
                });
                const [newTask, setNewTask] = React.useState({ 
                    title: '', 
                    priority: 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©',
                    dueDate: ''
                });
                const [showStats, setShowStats] = React.useState(false);
                const [theme, setTheme] = React.useState('purple');

                const categories = ['ÿµÿ≠ÿ©', 'ÿ™ÿπŸÑŸÖ', 'ÿπŸÖŸÑ', 'ÿ±Ÿäÿßÿ∂ÿ©', 'ŸÇÿ±ÿßÿ°ÿ©', 'ÿ£ÿÆÿ±Ÿâ'];
                const categoryEmojis = {
                    'ÿµÿ≠ÿ©': 'üíö',
                    'ÿ™ÿπŸÑŸÖ': 'üìö', 
                    'ÿπŸÖŸÑ': 'üíº',
                    'ÿ±Ÿäÿßÿ∂ÿ©': 'üèÉ‚Äç‚ôÄÔ∏è',
                    'ŸÇÿ±ÿßÿ°ÿ©': 'üìñ',
                    'ÿ£ÿÆÿ±Ÿâ': '‚≠ê'
                };

                // Icon component
                const Icon = ({ type, className = "w-6 h-6", animate = false }) => {
                    const icons = {
                        star: "‚≠ê", target: "üéØ", trophy: "üèÜ", plus: "‚ûï",
                        calendar: "üìÖ", check: "‚úÖ", circle: "‚≠ï", trash: "üóëÔ∏è",
                        list: "üìù", edit: "‚úèÔ∏è", stats: "üìä", theme: "üé®",
                        moon: "üåô", sun: "‚òÄÔ∏è", fire: "üî•", medal: "üèÖ"
                    };
                    return React.createElement('span', {
                        className: `${className} inline-block ${animate ? 'animate-bounce' : ''}`,
                        style: { fontSize: '1.5em' }
                    }, icons[type] || "üì±");
                };

                // Progress Circle Component
                const ProgressCircle = ({ progress, size = 60 }) => {
                    const radius = 22;
                    const circumference = radius * 2 * Math.PI;
                    const strokeDashoffset = circumference - (progress / 100) * circumference;

                    return React.createElement('div', {
                        className: 'relative',
                        style: { width: size, height: size }
                    }, [
                        React.createElement('svg', {
                            key: 'svg',
                            width: size,
                            height: size,
                            className: 'transform -rotate-90'
                        }, [
                            React.createElement('circle', {
                                key: 'bg',
                                cx: size / 2,
                                cy: size / 2,
                                r: radius,
                                fill: 'transparent',
                                stroke: '#e5e7eb',
                                strokeWidth: 6
                            }),
                            React.createElement('circle', {
                                key: 'progress',
                                cx: size / 2,
                                cy: size / 2,
                                r: radius,
                                fill: 'transparent',
                                stroke: progress === 100 ? '#10b981' : '#8b5cf6',
                                strokeWidth: 6,
                                strokeDasharray: circumference,
                                strokeDashoffset: strokeDashoffset,
                                style: { transition: 'stroke-dashoffset 0.5s ease-in-out' }
                            })
                        ]),
                        React.createElement('div', {
                            key: 'text',
                            className: 'absolute inset-0 flex items-center justify-center text-sm font-bold'
                        }, `${Math.round(progress)}%`)
                    ]);
                };

                // Load/Save data
                React.useEffect(() => {
                    try {
                        const savedHabits = localStorage.getItem('salma-habits');
                        const savedTasks = localStorage.getItem('salma-tasks');
                        const savedWelcome = localStorage.getItem('salma-welcome');
                        const savedTheme = localStorage.getItem('salma-theme');
                        const savedDarkMode = localStorage.getItem('salma-dark-mode');
                        
                        if (savedHabits) setHabits(JSON.parse(savedHabits));
                        if (savedTasks) setTasks(JSON.parse(savedTasks));
                        if (savedWelcome) setShowWelcome(false);
                        if (savedTheme) setTheme(savedTheme);
                        if (savedDarkMode) setDarkMode(JSON.parse(savedDarkMode));
                    } catch (e) {
                        console.log('Error loading data:', e);
                    }
                }, []);

                React.useEffect(() => {
                    localStorage.setItem('salma-habits', JSON.stringify(habits));
                }, [habits]);

                React.useEffect(() => {
                    localStorage.setItem('salma-tasks', JSON.stringify(tasks));
                }, [tasks]);

                React.useEffect(() => {
                    localStorage.setItem('salma-theme', theme);
                    localStorage.setItem('salma-dark-mode', JSON.stringify(darkMode));
                    document.body.className = darkMode ? 'dark-mode min-h-screen' : 'bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 min-h-screen';
                }, [theme, darkMode]);

                // Functions
                const addHabit = () => {
                    if (newHabit.name.trim()) {
                        const habit = {
                            id: Date.now(),
                            name: newHabit.name,
                            target: parseInt(newHabit.target) || 1,
                            current: 0,
                            category: newHabit.category,
                            streak: 0,
                            lastUpdated: new Date().toISOString().split('T')[0]
                        };
                        setHabits([...habits, habit]);
                        setNewHabit({ name: '', target: 1, category: 'ÿµÿ≠ÿ©' });
                        setShowAddForm(false);
                        showNotification('ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπÿßÿØÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üéâ', 'success');
                    }
                };

                const addTask = () => {
                    if (newTask.title.trim()) {
                        const task = {
                            id: Date.now(),
                            title: newTask.title,
                            completed: false,
                            priority: newTask.priority,
                            createdAt: new Date().toISOString(),
                            dueDate: newTask.dueDate
                        };
                        setTasks([...tasks, task]);
                        setNewTask({ title: '', priority: 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©', dueDate: '' });
                        setShowAddForm(false);
                        showNotification('ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ', 'success');
                    }
                };

                const updateHabit = (id, increment) => {
                    setHabits(habits.map(habit => {
                        if (habit.id === id) {
                            const newCurrent = increment 
                                ? Math.min(habit.current + 1, habit.target)
                                : Math.max(habit.current - 1, 0);
                            
                            const wasCompleted = habit.current >= habit.target;
                            const isNowCompleted = newCurrent >= habit.target;
                            
                            if (!wasCompleted && isNowCompleted) {
                                createConfetti();
                                showNotification(`üéâ ÿ£ÿ≠ÿ≥ŸÜÿ™ ÿ≥ŸÑŸÖŸâ! ÿ£ŸÉŸÖŸÑÿ™ ÿπÿßÿØÿ© "${habit.name}"`, 'success');
                            }
                            
                            return { 
                                ...habit, 
                                current: newCurrent,
                                lastUpdated: new Date().toISOString().split('T')[0]
                            };
                        }
                        return habit;
                    }));
                };

                const toggleTask = (id) => {
                    setTasks(tasks.map(task => {
                        if (task.id === id) {
                            const newCompleted = !task.completed;
                            if (newCompleted) {
                                showNotification(`‚úÖ ŸÖÿ®ÿ±ŸàŸÉ! ÿ£ŸÉŸÖŸÑÿ™ ŸÖŸáŸÖÿ© "${task.title}"`, 'success');
                            }
                            return { ...task, completed: newCompleted };
                        }
                        return task;
                    }));
                };

                const deleteItem = (id, type) => {
                    if (type === 'habit') {
                        setHabits(habits.filter(h => h.id !== id));
                        showNotification('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿπÿßÿØÿ©', 'info');
                    } else {
                        setTasks(tasks.filter(t => t.id !== id));
                        showNotification('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©', 'info');
                    }
                };

                const getStats = () => {
                    const totalHabits = habits.length;
                    const completedHabits = habits.filter(h => h.current >= h.target).length;
                    const habitProgress = totalHabits > 0 ? Math.round((completedHabits / totalHabits) * 100) : 0;
                    
                    const totalTasks = tasks.length;
                    const completedTasks = tasks.filter(t => t.completed).length;
                    const taskProgress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
                    
                    const totalStreak = habits.reduce((sum, h) => sum + (h.streak || 0), 0);
                    
                    return {
                        habitProgress,
                        taskProgress,
                        totalStreak,
                        totalCompleted: completedHabits + completedTasks
                    };
                };

                // Welcome screen
                if (showWelcome) {
                    return React.createElement('div', {
                        className: "fixed inset-0 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-600 flex items-center justify-center z-50"
                    }, React.createElement('div', {
                        className: "text-center text-white max-w-lg mx-auto p-8 animate-fadeIn"
                    }, [
                        React.createElement('div', {
                            key: 'animation',
                            className: "text-8xl mb-4 animate-bounce"
                        }, "üéâ"),
                        React.createElement('h1', {
                            key: 'title',
                            className: "text-5xl font-bold mb-6"
                        }, "ŸÖÿ®ÿ±ŸàŸÉ Ÿäÿß ÿ≥ŸÑŸÖŸâ! üéä"),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: "text-xl mb-8"
                        }, "ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™! ÿ≠ÿßŸÜ ŸàŸÇÿ™ ÿßŸÑÿ£ŸáÿØÿßŸÅ ÿßŸÑÿ¨ÿØŸäÿØÿ© üåü"),
                        React.createElement('button', {
                            key: 'start-btn',
                            onClick: () => {
                                setShowWelcome(false);
                                localStorage.setItem('salma-welcome', 'true');
                                createConfetti();
                            },
                            className: "bg-white text-purple-600 px-10 py-4 rounded-full font-bold text-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 animate-pulse"
                        }, "ÿßÿ®ÿØÿ¶Ÿä ŸÖÿ∫ÿßŸÖÿ±ÿ™ŸÉ ÿßŸÑÿ¨ÿØŸäÿØÿ©! ‚ú®")
                    ]));
                }

                const stats = getStats();

                // Main app
                return React.createElement('div', {
                    className: `max-w-6xl mx-auto p-4 ${darkMode ? 'text-white' : ''}`
                }, [
                    // Header
                    React.createElement('div', {
                        key: 'header',
                        className: "text-center mb-8 animate-fadeIn"
                    }, [
                        React.createElement('h1', { 
                            key: 'title', 
                            className: `text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 ${darkMode ? 'text-white' : ''}`
                        }, "ŸÖŸÜÿ∏ŸÖ ÿ≥ŸÑŸÖŸâ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ‚≠ê"),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: `text-lg ${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-4`
                        }, `ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ! ŸÑÿØŸäŸÉ ${habits.filter(h => h.current < h.target).length} ÿπÿßÿØÿ© Ÿà ${tasks.filter(t => !t.completed).length} ŸÖŸáŸÖÿ© ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ±ŸÉ üí™`)
                    ]),

                    // Controls
                    React.createElement('div', {
                        key: 'controls',
                        className: "flex flex-wrap justify-center gap-3 mb-8"
                    }, [
                        React.createElement('select', {
                            key: 'theme-selector',
                            value: theme,
                            onChange: (e) => setTheme(e.target.value),
                            className: `px-4 py-2 rounded-full border-2 border-purple-200 focus:border-purple-500 outline-none transition-all ${darkMode ? 'bg-gray-800 text-white' : 'bg-white'}`
                        }, [
                            React.createElement('option', { key: 'purple', value: 'purple' }, 'üü£ ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä'),
                            React.createElement('option', { key: 'pink', value: 'pink' }, 'ü©∑ Ÿàÿ±ÿØŸä'),
                            React.createElement('option', { key: 'blue', value: 'blue' }, 'üîµ ÿ£ÿ≤ÿ±ŸÇ')
                        ]),
                        React.createElement('button', {
                            key: 'dark-toggle',
                            onClick: () => setDarkMode(!darkMode),
                            className: `px-4 py-2 rounded-full ${darkMode ? 'bg-yellow-500 text-black' : 'bg-gray-800 text-white'} transition-all transform hover:scale-105 flex items-center gap-2`
                        }, [
                            Icon({ type: darkMode ? 'sun' : 'moon', key: 'mode-icon' }),
                            React.createElement('span', { key: 'mode-text' }, darkMode ? 'ŸÜŸáÿßÿ±Ÿä' : 'ŸÑŸäŸÑŸä')
                        ]),
                        React.createElement('button', {
                            key: 'stats-toggle',
                            onClick: () => setShowStats(!showStats),
                            className: `px-4 py-2 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white transition-all transform hover:scale-105 flex items-center gap-2`
                        }, [
                            Icon({ type: 'stats', key: 'stats-icon' }),
                            React.createElement('span', { key: 'stats-text' }, showStats ? 'ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™' : 'ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™')
                        ])
                    ]),

                    // Stats Panel
                    showStats && React.createElement('div', {
                        key: 'stats-panel',
                        className: "mb-8 animate-slideIn"
                    }, React.createElement('div', {
                        className: `glass-effect rounded-2xl p-6 ${darkMode ? 'bg-gray-800/50' : 'bg-white/50'}`
                    }, [
                        React.createElement('h2', {
                            key: 'stats-title',
                            className: `text-2xl font-bold mb-6 text-center ${darkMode ? 'text-white' : 'text-gray-800'}`
                        }, "üìä ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ŸÉ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©"),
                        React.createElement('div', {
                            key: 'stats-grid',
                            className: "grid grid-cols-2 md:grid-cols-4 gap-4"
                        }, [
                            React.createElement('div', {
                                key: 'progress-card1',
                                className: "text-center"
                            }, [
                                ProgressCircle({ progress: stats.habitProgress, key: 'circle1' }),
                                React.createElement('h3', { key: 'title1', className: "text-lg font-semibold mt-2" }, "ÿßŸÑÿπÿßÿØÿßÿ™"),
                                React.createElement('p', { key: 'desc1', className: "text-sm opacity-75" }, `${habits.filter(h => h.current >= h.target).length}/${habits.length}`)
                            ]),
                            React.createElement('div', {
                                key: 'progress-card2',
                                className: "text-center"
                            }, [
                                ProgressCircle({ progress: stats.taskProgress, key: 'circle2' }),
                                React.createElement('h3', { key: 'title2', className: "text-lg font-semibold mt-2" }, "ÿßŸÑŸÖŸáÿßŸÖ"),
                                React.createElement('p', { key: 'desc2', className: "text-sm opacity-75" }, `${tasks.filter(t => t.completed).length}/${tasks.length}`)
                            ]),
                            React.createElement('div', {
                                key: 'streak-card',
                                className: "text-center"
                            }, [
                                React.createElement('div', {
                                    key: 'streak-display',
                                    className: "w-16 h-16 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-bold text-xl mx-auto mb-2"
                                }, stats.totalStreak),
                                React.createElement('h3', { key: 'title3', className: "text-lg font-semibold" }, "ÿ£ŸäÿßŸÖ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©"),
                                React.createElement('p', { key: 'desc3', className: "text-sm opacity-75" }, "üî• ÿßŸÑŸÜÿßÿ± ŸÖÿ¥ÿ™ÿπŸÑÿ©!")
                            ]),
                            React.createElement('div', {
                                key: 'completed-card',
                                className: "text-center"
                            }, [
                                React.createElement('div', {
                                    key: 'completed-display',
                                    className: "w-16 h-16 bg-gradient-to-br from-green-400 to-green-500 rounded-full flex items-center justify-center text-white font-bold text-xl mx-auto mb-2"
                                }, stats.totalCompleted),
                                React.createElement('h3', { key: 'title4', className: "text-lg font-semibold" }, "ŸÖŸÉÿ™ŸÖŸÑÿ©"),
                                React.createElement('p', { key: 'desc4', className: "text-sm opacity-75" }, "‚úÖ ÿ•ŸÜÿ¨ÿßÿ≤ÿßÿ™")
                            ])
                        ])
                    ])),

                    // Tabs
                    React.createElement('div', {
                        key: 'tabs',
                        className: "flex justify-center mb-8"
                    }, React.createElement('div', {
                        className: `glass-effect rounded-full p-2 shadow-xl w-full max-w-md ${darkMode ? 'bg-gray-800/50' : 'bg-white/50'}`
                    }, React.createElement('div', {
                        className: "grid grid-cols-2 gap-2"
                    }, [
                        React.createElement('button', {
                            key: 'habits-tab',
                            onClick: () => setActiveTab('habits'),
                            className: `px-6 py-4 rounded-full font-medium transition-all flex items-center justify-center gap-2 text-sm ${
                                activeTab === 'habits' 
                                ? `bg-gradient-to-r ${theme === 'purple' ? 'from-purple-500 to-purple-600' : theme === 'pink' ? 'from-pink-500 to-pink-600' : 'from-blue-500 to-blue-600'} text-white shadow-lg transform scale-105` 
                                : `${darkMode ? 'text-white hover:bg-gray-700' : 'text-gray-600 hover:bg-gray-100'}`
                            }`
                        }, [
                            Icon({ type: 'target', key: 'icon', className: "w-5 h-5" }),
                            React.createElement('span', { key: 'text' }, "ÿßŸÑÿπÿßÿØÿßÿ™"),
                            React.createElement('span', { 
                                key: 'badge',
                                className: `ml-2 bg-white/20 px-2 py-1 rounded-full text-xs ${activeTab === 'habits' ? 'text-white' : 'text-gray-500'}`
                            }, habits.filter(h => h.current < h.target).length)
                        ]),
                        React.createElement('button', {
                            key: 'tasks-tab',
                            onClick: () => setActiveTab('tasks'),
                            className: `px-6 py-4 rounded-full font-medium transition-all flex items-center justify-center gap-2 text-sm ${
                                activeTab === 'tasks' 
                                ? `bg-gradient-to-r ${theme === 'purple' ? 'from-purple-500 to-purple-600' : theme === 'pink' ? 'from-pink-500 to-pink-600' : 'from-blue-500 to-blue-600'} text-white shadow-lg transform scale-105` 
                                : `${darkMode ? 'text-white hover:bg-gray-700' : 'text-gray-600 hover:bg-gray-100'}`
                            }`
                        }, [
                            Icon({ type: 'list', key: 'icon', className: "w-5 h-5" }),
                            React.createElement('span', { key: 'text' }, "ÿßŸÑŸÖŸáÿßŸÖ"),
                            React.createElement('span', { 
                                key: 'badge',
                                className: `ml-2 bg-white/20 px-2 py-1 rounded-full text-xs ${activeTab === 'tasks' ? 'text-white' : 'text-gray-500'}`
                            }, tasks.filter(t => !t.completed).length)
                        ])
                    ]))),

                    // Add Button
                    React.createElement('div', {
                        key: 'add-section',
                        className: "text-center mb-8"
                    }, React.createElement('button', {
                        onClick: () => setShowAddForm(true),
                        className: `bg-gradient-to-r ${theme === 'purple' ? 'from-purple-500 to-pink-500' : theme === 'pink' ? 'from-pink-500 to-rose-500' : 'from-blue-500 to-indigo-500'} text-white px-8 py-4 rounded-full flex items-center gap-3 shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 mx-auto font-semibold text-lg animate-pulse`
                    }, [
                        Icon({ type: 'plus', key: 'icon', className: "w-6 h-6" }),
                        React.createElement('span', { key: 'text' }, activeTab === 'habits' ? '‚ú® ÿ•ÿ∂ÿßŸÅÿ© ÿπÿßÿØÿ© ÿ¨ÿØŸäÿØÿ©' : 'üìù ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ©'),
                        React.createElement('div', {
                            key: 'sparkle',
                            className: "text-yellow-200 animate-bounce"
                        }, "‚ú®")
                    ])),

                    // Add Form Modal
                    showAddForm && React.createElement('div', {
                        key: 'modal',
                        className: "modal",
                        onClick: (e) => e.target.className.includes('modal') && setShowAddForm(false)
                    }, React.createElement('div', {
                        className: `${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 shadow-2xl max-w-md w-full mx-4 animate-fadeIn`
                    }, [
                        React.createElement('div', {
                            key: 'modal-header',
                            className: "text-center mb-6"
                        }, [
                            React.createElement('div', { 
                                key: 'modal-icon',
                                className: "text-4xl mb-2" 
                            }, activeTab === 'habits' ? "üéØ" : "üìù"),
                            React.createElement('h3', {
                                key: 'modal-title',
                                className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'} mb-2`
                            }, activeTab === 'habits' ? 'ÿπÿßÿØÿ© ÿ¨ÿØŸäÿØÿ© ÿ±ÿßÿ¶ÿπÿ©!' : 'ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ© ŸÖŸáŸÖÿ©!')
                        ]),
                        
                        activeTab === 'habits' ? 
                        React.createElement('div', {
                            key: 'habit-form',
                            className: "space-y-4"
                        }, [
                            React.createElement('div', { key: 'name-group' }, [
                                React.createElement('label', { 
                                    key: 'name-label',
                                    className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                }, "üéØ ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿØÿ©"),
                                React.createElement('input', {
                                    key: 'habit-name',
                                    type: 'text',
                                    placeholder: 'ŸÖÿ´ÿßŸÑ: ÿ¥ÿ±ÿ® 8 ÿ£ŸÉŸàÿßÿ® ŸÖÿßÿ°',
                                    value: newHabit.name,
                                    onChange: (e) => setNewHabit({...newHabit, name: e.target.value}),
                                    className: `w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                })
                            ]),
                            React.createElement('div', {
                                key: 'target-category-group',
                                className: "grid grid-cols-2 gap-4"
                            }, [
                                React.createElement('div', { key: 'target-group' }, [
                                    React.createElement('label', { 
                                        key: 'target-label',
                                        className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                    }, "üéØ ÿßŸÑŸáÿØŸÅ ÿßŸÑŸäŸàŸÖŸä"),
                                    React.createElement('input', {
                                        key: 'habit-target',
                                        type: 'number',
                                        min: '1',
                                        max: '100',
                                        value: newHabit.target,
                                        onChange: (e) => setNewHabit({...newHabit, target: e.target.value}),
                                        className: `w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                    })
                                ]),
                                React.createElement('div', { key: 'category-group' }, [
                                    React.createElement('label', { 
                                        key: 'category-label',
                                        className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                    }, "üìÇ ÿßŸÑŸÅÿ¶ÿ©"),
                                    React.createElement('select', {
                                        key: 'habit-category',
                                        value: newHabit.category,
                                        onChange: (e) => setNewHabit({...newHabit, category: e.target.value}),
                                        className: `w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                    }, categories.map(cat => 
                                        React.createElement('option', { key: cat, value: cat }, `${categoryEmojis[cat]} ${cat}`)
                                    ))
                                ])
                            ])
                        ]) :
                        React.createElement('div', {
                            key: 'task-form',
                            className: "space-y-4"
                        }, [
                            React.createElement('div', { key: 'title-group' }, [
                                React.createElement('label', { 
                                    key: 'title-label',
                                    className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                }, "üìù ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸáŸÖÿ©"),
                                React.createElement('input', {
                                    key: 'task-title',
                                    type: 'text',
                                    placeholder: 'ŸÖÿ´ÿßŸÑ: ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ∫ÿ±ŸÅÿ©',
                                    value: newTask.title,
                                    onChange: (e) => setNewTask({...newTask, title: e.target.value}),
                                    className: `w-full border-2 border-indigo-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                })
                            ]),
                            React.createElement('div', {
                                key: 'priority-date-group',
                                className: "grid grid-cols-2 gap-4"
                            }, [
                                React.createElement('div', { key: 'priority-group' }, [
                                    React.createElement('label', { 
                                        key: 'priority-label',
                                        className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                    }, "‚ö° ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©"),
                                    React.createElement('select', {
                                        key: 'task-priority',
                                        value: newTask.priority,
                                        onChange: (e) => setNewTask({...newTask, priority: e.target.value}),
                                        className: `w-full border-2 border-indigo-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                    }, [
                                        React.createElement('option', { key: 'low', value: 'ŸÖŸÜÿÆŸÅÿ∂ÿ©' }, 'üü¢ ŸÖŸÜÿÆŸÅÿ∂ÿ©'),
                                        React.createElement('option', { key: 'med', value: 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©' }, 'üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©'),
                                        React.createElement('option', { key: 'high', value: 'ÿπÿßŸÑŸäÿ©' }, 'üî¥ ÿπÿßŸÑŸäÿ©')
                                    ])
                                ]),
                                React.createElement('div', { key: 'date-group' }, [
                                    React.createElement('label', { 
                                        key: 'date-label',
                                        className: `block text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'} mb-2`
                                    }, "üìÖ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä"),
                                    React.createElement('input', {
                                        key: 'task-date',
                                        type: 'date',
                                        value: newTask.dueDate,
                                        onChange: (e) => setNewTask({...newTask, dueDate: e.target.value}),
                                        className: `w-full border-2 border-indigo-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`
                                    })
                                ])
                            ])
                        ]),
                        
                        React.createElement('div', {
                            key: 'modal-buttons',
                            className: "flex gap-3 mt-8"
                        }, [
                            React.createElement('button', {
                                key: 'save-btn',
                                onClick: activeTab === 'habits' ? addHabit : addTask,
                                className: `flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all transform hover:scale-105 shadow-lg flex items-center justify-center gap-2`
                            }, [
                                Icon({ type: 'check', key: 'save-icon' }),
                                React.createElement('span', { key: 'save-text' }, 'ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜÿ¨ÿßÿ≠! ‚ú®')
                            ]),
                            React.createElement('button', {
                                key: 'cancel-btn',
                                onClick: () => setShowAddForm(false),
                                className: `px-6 py-3 rounded-xl font-semibold ${darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'} transition-all`
                            }, 'ÿ•ŸÑÿ∫ÿßÿ°')
                        ])
                    ])),

                    // Content Area
                    React.createElement('div', {
                        key: 'content',
                        className: "space-y-6"
                    }, 
                        activeTab === 'habits' ? 
                        // Habits List
                        React.createElement('div', {
                            key: 'habits-container',
                            className: "space-y-4"
                        }, [
                            habits.length > 0 && React.createElement('div', {
                                key: 'habits-header',
                                className: "text-center mb-6"
                            }, [
                                React.createElement('h2', {
                                    key: 'habits-title',
                                    className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'} mb-2`
                                }, `üéØ ÿπÿßÿØÿßÿ™ŸÉ ÿßŸÑŸäŸàŸÖŸäÿ© (${habits.length})`),
                                React.createElement('p', {
                                    key: 'habits-subtitle',
                                    className: `${darkMode ? 'text-gray-300' : 'text-gray-600'}`
                                }, `ŸÖŸÉÿ™ŸÖŸÑÿ© ÿßŸÑŸäŸàŸÖ: ${habits.filter(h => h.current >= h.target).length}/${habits.length}`)
                            ]),
                            
                            ...habits.map(habit => {
                                const progress = Math.min((habit.current / habit.target) * 100, 100);
                                const isCompleted = habit.current >= habit.target;
                                
                                return React.createElement('div', {
                                    key: habit.id,
                                    className: `${darkMode ? 'bg-gray-800/50' : 'bg-white'} rounded-2xl p-6 shadow-xl border card-hover animate-fadeIn ${isCompleted ? 'ring-2 ring-green-400' : ''}`
                                }, [
                                    React.createElement('div', {
                                        key: 'habit-header',
                                        className: "flex items-center justify-between mb-6"
                                    }, [
                                        React.createElement('div', {
                                            key: 'habit-info',
                                            className: "flex items-center gap-4"
                                        }, [
                                            React.createElement('div', {
                                                key: 'category-badge',
                                                className: `w-12 h-12 rounded-full flex items-center justify-center text-xl ${
                                                    habit.category === 'ÿµÿ≠ÿ©' ? 'bg-green-100 text-green-600' :
                                                    habit.category === 'ÿ™ÿπŸÑŸÖ' ? 'bg-blue-100 text-blue-600' :
                                                    habit.category === 'ÿπŸÖŸÑ' ? 'bg-purple-100 text-purple-600' :
                                                    habit.category === 'ÿ±Ÿäÿßÿ∂ÿ©' ? 'bg-orange-100 text-orange-600' :
                                                    habit.category === 'ŸÇÿ±ÿßÿ°ÿ©' ? 'bg-pink-100 text-pink-600' :
                                                    'bg-gray-100 text-gray-600'
                                                }`
                                            }, categoryEmojis[habit.category]),
                                            React.createElement('div', { key: 'habit-details' }, [
                                                React.createElement('h3', {
                                                    key: 'habit-name',
                                                    className: `text-xl font-bold ${
                                                        isCompleted 
                                                        ? 'text-green-600' 
                                                        : darkMode ? 'text-white' : 'text-gray-800'
                                                    }`
                                                }, habit.name),
                                                React.createElement('p', {
                                                    key: 'habit-category',
                                                    className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'}`
                                                }, `${habit.category} ‚Ä¢ ${habit.streak || 0} ŸäŸàŸÖ ŸÖÿ™ÿ™ÿßŸÑŸä`)
                                            ])
                                        ]),
                                        React.createElement('button', {
                                            key: 'delete-btn',
                                            onClick: () => deleteItem(habit.id, 'habit'),
                                            className: `p-3 text-red-500 hover:bg-red-50 rounded-full transition-all transform hover:scale-110 ${darkMode ? 'hover:bg-red-900/20' : ''}`
                                        }, Icon({ type: 'trash', className: "w-5 h-5" }))
                                    ]),

                                    React.createElement('div', {
                                        key: 'habit-progress',
                                        className: "mb-6"
                                    }, [
                                        React.createElement('div', {
                                            key: 'progress-header',
                                            className: "flex justify-between items-center mb-3"
                                        }, [
                                            React.createElement('span', {
                                                key: 'progress-label',
                                                className: `text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`
                                            }, "ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑŸäŸàŸÖ"),
                                            React.createElement('span', {
                                                key: 'progress-percentage',
                                                className: `text-sm font-bold ${isCompleted ? 'text-green-600' : 'text-purple-600'}`
                                            }, `${Math.round(progress)}%`)
                                        ]),
                                        React.createElement('div', {
                                            key: 'progress-bar-container',
                                            className: `w-full bg-gray-200 rounded-full h-3 overflow-hidden ${darkMode ? 'bg-gray-700' : ''}`
                                        }, React.createElement('div', {
                                            key: 'progress-bar',
                                            className: `h-full transition-all duration-500 ${isCompleted ? 'bg-gradient-to-r from-green-400 to-green-600' : 'bg-gradient-to-r from-purple-400 to-pink-500'} ${isCompleted ? 'animate-celebration' : ''}`,
                                            style: { width: `${progress}%` }
                                        }))
                                    ]),

                                    React.createElement('div', {
                                        key: 'habit-controls',
                                        className: "flex items-center justify-between"
                                    }, [
                                        React.createElement('div', {
                                            key: 'progress-controls',
                                            className: "flex items-center gap-4"
                                        }, [
                                            React.createElement('button', {
                                                key: 'minus-btn',
                                                onClick: () => updateHabit(habit.id, false),
                                                disabled: habit.current === 0,
                                                className: `w-12 h-12 rounded-full bg-gradient-to-br from-red-400 to-red-500 text-white flex items-center justify-center hover:from-red-500 hover:to-red-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-xl font-bold shadow-lg transform hover:scale-110 active:scale-95`
                                            }, "‚àí"),
                                            React.createElement('div', {
                                                key: 'progress-display',
                                                className: "text-center px-6"
                                            }, [
                                                React.createElement('div', {
                                                    key: 'numbers',
                                                    className: `text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'} ${isCompleted ? 'text-green-600 animate-pulse' : ''}`
                                                }, `${habit.current}`),
                                                React.createElement('div', {
                                                    key: 'divider',
                                                    className: `text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`
                                                }, `ŸÖŸÜ ${habit.target}`),
                                                React.createElement('div', {
                                                    key: 'label',
                                                    className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} font-medium`
                                                }, habit.target === 1 ? "ŸÖÿ±ÿ©" : "ŸÖÿ±ÿßÿ™")
                                            ]),
                                            React.createElement('button', {
                                                key: 'plus-btn',
                                                onClick: () => updateHabit(habit.id, true),
                                                disabled: habit.current >= habit.target,
                                                className: `w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-500 text-white flex items-center justify-center hover:from-green-500 hover:to-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-xl font-bold shadow-lg transform hover:scale-110 active:scale-95`
                                            }, "+")
                                        ]),
                                        React.createElement('div', {
                                            key: 'status-display',
                                            className: "text-right"
                                        }, [
                                            isCompleted ? 
                                                React.createElement('div', {
                                                    key: 'completed-status',
                                                    className: "flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-full animate-bounce"
                                                }, [
                                                    React.createElement('span', { key: 'completed-icon', className: "text-xl" }, "üéâ"),
                                                    React.createElement('span', { key: 'completed-text', className: "font-bold" }, "ŸÖŸÉÿ™ŸÖŸÑÿ©!")
                                                ]) :
                                                React.createElement('div', {
                                                    key: 'progress-status',
                                                    className: `flex items-center gap-2 ${darkMode ? 'text-gray-300 bg-gray-700' : 'text-gray-600 bg-gray-50'} px-4 py-2 rounded-full`
                                                }, [
                                                    React.createElement('span', { key: 'progress-icon', className: "text-lg" }, "‚è≥"),
                                                    React.createElement('span', { key: 'progress-text', className: "font-medium" }, "ŸÅŸä ÿßŸÑÿ™ŸÇÿØŸÖ...")
                                                ])
                                        ])
                                    ])
                                ]);
                            }),
                            
                            habits.length === 0 && React.createElement('div', {
                                key: 'empty-habits',
                                className: "text-center py-16 animate-fadeIn"
                            }, [
                                React.createElement('div', { key: 'empty-icon', className: "text-8xl mb-4 animate-bounce" }, "üéØ"),
                                React.createElement('h3', { 
                                    key: 'empty-title',
                                    className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-600'} mb-2`
                                }, "ÿßÿ®ÿØÿ¶Ÿä ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿπÿßÿØÿßÿ™!"),
                                React.createElement('p', { 
                                    key: 'empty-desc',
                                    className: `${darkMode ? 'text-gray-400' : 'text-gray-500'} mb-8 text-lg`
                                }, "ŸÉŸÑ ÿπÿßÿØÿ© ÿπÿ∏ŸäŸÖÿ© ÿ™ÿ®ÿØÿ£ ÿ®ÿÆÿ∑Ÿàÿ© ÿµÿ∫Ÿäÿ±ÿ© ‚ú®"),
                                React.createElement('button', {
                                    key: 'empty-add-btn',
                                    onClick: () => setShowAddForm(true),
                                    className: `bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 animate-pulse`
                                }, "ÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸàŸÑ ÿπÿßÿØÿ© üåü")
                            ])
                        ]) :
                        // Tasks List  
                        React.createElement('div', {
                            key: 'tasks-container',
                            className: "space-y-4"
                        }, [
                            tasks.length > 0 && React.createElement('div', {
                                key: 'tasks-header',
                                className: "text-center mb-6"
                            }, [
                                React.createElement('h2', {
                                    key: 'tasks-title',
                                    className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'} mb-2`
                                }, `üìù ŸÖŸáÿßŸÖŸÉ (${tasks.length})`),
                                React.createElement('p', {
                                    key: 'tasks-subtitle',
                                    className: `${darkMode ? 'text-gray-300' : 'text-gray-600'}`
                                }, `ŸÖŸÉÿ™ŸÖŸÑÿ©: ${tasks.filter(t => t.completed).length} ‚Ä¢ ŸÖÿ™ÿ®ŸÇŸäÿ©: ${tasks.filter(t => !t.completed).length}`)
                            ]),
                            
                            ...tasks
                                .sort((a, b) => {
                                    if (a.completed !== b.completed) return a.completed ? 1 : -1;
                                    const priorityOrder = { 'ÿπÿßŸÑŸäÿ©': 0, 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©': 1, 'ŸÖŸÜÿÆŸÅÿ∂ÿ©': 2 };
                                    return priorityOrder[a.priority] - priorityOrder[b.priority];
                                })
                                .map(task => {
                                    const dueDate = task.dueDate ? new Date(task.dueDate) : null;
                                    const today = new Date();
                                    const isOverdue = dueDate && dueDate < today && !task.completed;
                                    const isDueSoon = dueDate && dueDate > today && (dueDate - today) / (1000 * 60 * 60 * 24) <= 2;
                                    
                                    return React.createElement('div', {
                                        key: task.id,
                                        className: `${darkMode ? 'bg-gray-800/50' : 'bg-white'} rounded-2xl p-6 shadow-xl border card-hover animate-fadeIn ${
                                            task.completed ? 'opacity-75 bg-green-50 border-green-200' : 
                                            isOverdue ? 'border-red-300 bg-red-50' :
                                            isDueSoon ? 'border-yellow-300 bg-yellow-50' :
                                            'border-gray-200'
                                        }`
                                    }, [
                                        React.createElement('div', {
                                            key: 'task-main',
                                            className: "flex items-start justify-between"
                                        }, [
                                            React.createElement('div', {
                                                key: 'task-content',
                                                className: "flex items-start gap-4 flex-1"
                                            }, [
                                                React.createElement('button', {
                                                    key: 'toggle-btn',
                                                    onClick: () => toggleTask(task.id),
                                                    className: `p-2 rounded-full transition-all transform hover:scale-110 ${
                                                        task.completed 
                                                        ? 'text-green-600 bg-green-100 hover:bg-green-200' 
                                                        : 'text-gray-400 bg-gray-100 hover:bg-gray-200'
                                                    }`
                                                }, React.createElement('span', {
                                                    className: "text-2xl"
                                                }, task.completed ? "‚úÖ" : "‚≠ï")),
                                                
                                                React.createElement('div', {
                                                    key: 'task-details',
                                                    className: "flex-1 min-w-0"
                                                }, [
                                                    React.createElement('h3', {
                                                        key: 'task-title',
                                                        className: `text-xl font-bold mb-2 ${
                                                            task.completed 
                                                            ? 'text-gray-500 line-through' 
                                                            : darkMode ? 'text-white' : 'text-gray-800'
                                                        }`
                                                    }, task.title),
                                                    
                                                    React.createElement('div', {
                                                        key: 'task-meta',
                                                        className: "flex flex-wrap items-center gap-3"
                                                    }, [
                                                        React.createElement('span', {
                                                            key: 'priority-badge',
                                                            className: `px-3 py-1 rounded-full text-xs font-bold border-2 ${
                                                                task.priority === 'ÿπÿßŸÑŸäÿ©' ? 'bg-red-100 text-red-700 border-red-300' :
                                                                task.priority === 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©' ? 'bg-yellow-100 text-yellow-700 border-yellow-300' :
                                                                'bg-green-100 text-green-700 border-green-300'
                                                            }`
                                                        }, `${task.priority === 'ÿπÿßŸÑŸäÿ©' ? 'üî¥' : task.priority === 'ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©' ? 'üü°' : 'üü¢'} ${task.priority}`),
                                                        
                                                        task.dueDate && React.createElement('span', {
                                                            key: 'due-date',
                                                            className: `px-3 py-1 rounded-full text-xs font-bold ${
                                                                isOverdue ? 'bg-red-100 text-red-700' :
                                                                isDueSoon ? 'bg-yellow-100 text-yellow-700' :
                                                                'bg-blue-100 text-blue-700'
                                                            }`
                                                        }, `üìÖ ${new Date(task.dueDate).toLocaleDateString('ar-EG')}`),
                                                        
                                                        task.completed && React.createElement('span', {
                                                            key: 'completed-badge',
                                                            className: "px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 animate-pulse"
                                                        }, "‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©")
                                                    ])
                                                ])
                                            ]),
                                            
                                            React.createElement('button', {
                                                key: 'delete-task-btn',
                                                onClick: () => deleteItem(task.id, 'task'),
                                                className: `p-3 text-red-500 hover:bg-red-50 rounded-full transition-all transform hover:scale-110 ${darkMode ? 'hover:bg-red-900/20' : ''}`
                                            }, Icon({ type: 'trash', className: "w-5 h-5" }))
                                        ])
                                    ]);
                                }),
                            
                            tasks.length === 0 && React.createElement('div', {
                                key: 'empty-tasks',
                                className: "text-center py-16 animate-fadeIn"
                            }, [
                                React.createElement('div', { key: 'empty-icon', className: "text-8xl mb-4 animate-bounce" }, "üìù"),
                                React.createElement('h3', { 
                                    key: 'empty-title',
                                    className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-600'} mb-2`
                                }, "ŸÜÿ∏ŸÖŸä ŸÖŸáÿßŸÖŸÉ ÿ®ÿ∞ŸÉÿßÿ°!"),
                                React.createElement('p', { 
                                    key: 'empty-desc',
                                    className: `${darkMode ? 'text-gray-400' : 'text-gray-500'} mb-8 text-lg`
                                }, "ŸÉŸÑ ÿ•ŸÜÿ¨ÿßÿ≤ ÿπÿ∏ŸäŸÖ Ÿäÿ®ÿØÿ£ ÿ®ŸÇÿßÿ¶ŸÖÿ© ŸÖŸáÿßŸÖ ŸÖŸÜÿ∏ŸÖÿ© üìã"),
                                React.createElement('button', {
                                    key: 'empty-add-btn',
                                    onClick: () => setShowAddForm(true),
                                    className: `bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 animate-pulse`
                                }, "ÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸàŸÑ ŸÖŸáŸÖÿ© üéØ")
                            ])
                        ])
                    ),

                    // Footer
                    React.createElement('div', {
                        key: 'footer',
                        className: `mt-16 text-center py-8 border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'}`
                    }, [
                        React.createElement('p', {
                            key: 'footer-message',
                            className: `${darkMode ? 'text-gray-300' : 'text-gray-600'} text-lg`
                        }, [
                            React.createElement('span', {
                                key: 'congrats',
                                className: "text-purple-600 font-bold"
                            }, "ÿ£ŸÜÿ™ ÿ™ŸÇŸàŸÖŸäŸÜ ÿ®ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ Ÿäÿß ÿ≥ŸÑŸÖŸâ!"),
                            React.createElement('br', { key: 'br' }),
                            "ŸÉŸÑ ŸäŸàŸÖ ÿ™ÿµÿ®ÿ≠ŸäŸÜ ÿ£ŸÇŸàŸâ Ÿàÿ£ŸÉÿ´ÿ± ÿ™ŸÜÿ∏ŸäŸÖÿßŸã üí™‚ú®"
                        ]),
                        React.createElement('div', {
                            key: 'footer-stats',
                            className: "mt-4 text-sm opacity-75"
                        }, `üì± ÿ™ÿ∑ÿ®ŸäŸÇ ŸÖÿ≠ŸÅŸàÿ∏ ŸÖÿ≠ŸÑŸäÿßŸã ‚Ä¢ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ${new Date().toLocaleDateString('ar-EG')}`)
                    ])
                ]);
            }

            // Render the app
            const root = ReactDOM.createRoot(document.getElementById('app'));
            root.render(React.createElement(App));
        });

        // PWA Installation
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installPrompt.style.display = 'block';
            
            setTimeout(() => {
                showNotification('üí° ŸäŸÖŸÉŸÜŸÉ ÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ Ÿáÿßÿ™ŸÅŸÉ ŸÑŸÑŸàÿµŸàŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ!', 'info');
            }, 5000);
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((result) => {
                    if (result.outcome === 'accepted') {
                        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ!');
                        installPrompt.style.display = 'none';
                        showNotification('üéâ ÿ™ŸÖ ÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ŸÜÿ¨ÿßÿ≠!', 'success');
                        createConfetti();
                    }
                    deferredPrompt = null;
                });
            }
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then((registration) => {
                    console.log('‚úÖ Service Worker ŸÖÿ≥ÿ¨ŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!');
                })
                .catch((error) => {
                    console.log('‚ÑπÔ∏è Service Worker ÿ≥ŸäÿπŸÖŸÑ ÿπŸÜÿØ ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ÿÆÿßÿØŸÖ');
                });
        }

        // PWA Events
        window.addEventListener('appinstalled', (e) => {
            console.log('üéâ ÿ™ŸÖ ÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ŸÜÿ¨ÿßÿ≠!');
            createConfetti();
        });

        window.addEventListener('online', () => {
            showNotification('üåê ÿπÿØÿ™ ŸÑŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™!', 'success');
            document.body.classList.remove('offline');
        });

        window.addEventListener('offline', () => {
            showNotification('üì± ÿ£ÿµÿ®ÿ≠ÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ - ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸäÿπŸÖŸÑ ŸÖÿ≠ŸÑŸäÿßŸã', 'info');
            document.body.classList.add('offline');
        });

        console.log('üéâ ÿ™ÿ∑ÿ®ŸäŸÇ ÿ≥ŸÑŸÖŸâ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ!');
    </script>
</body>
</html>
